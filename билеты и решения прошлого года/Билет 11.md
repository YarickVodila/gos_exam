# Билет №11

## 1. О чем говорят ключевые слова “this”, “super” в ООП, где и как их можно использовать?

**Объектно-ориентированное программирование** – концепция программирования, базирующаяся на использовании объектов.

> Если в структурной концепции главную роль играют **логика и понимание последовательности выполнения действия для достижения поставленной цели**, то в объектной концепции – **представление программы как системы взаимодействующих объектов**.

**Классом** в ООП понимается некая сущность, у которой можно смоделировать свойства и поведения. То есть, класс – некая идея сущности, своеобразный чертёж. Идею можно воплотить, и это воплощение будет называться **экземпляром** или **объектом**. У идеи есть некие характерные свойства – **атрибуты** или **поля**. Идее характерны некие способы взаимодействия – **методы**.

**Класс** – своеобразный чертёж объекта, позволяющий воплотить содержащуюся в нём идею в качестве экземпляра объекта.

**Класс** – это способ описания сущности, определяющий состояние и поведение, зависящее от этого состояния, а также правила для взаимодействия с данной сущностью (контракт).

Ключевое слово `this` является ссылкой на текущий экземпляр класса.

>Используется, когда нужно обратиться к текущему экземпляру класса.

Ключевое слово `super` является ссылкой на класс, производным от которого является текущий класс. По концепции наследования, это банально ссылка на родительский класс из дочернего класса.

>Используется, когда нужно в классе или его экземпляре вызвать метод, конструктор или старосту из родительского класса.

## 2. Основные понятия реляционной базы данных.

**База данных** – упорядоченный набор структурированной информации или данных, которые обычно хранятся в электронном виде в компьютерной системе.

**База данных** – имеющая название совокупность данных, которая отражает состояние объектов и их отношений в рассматриваемой предметной области.

Базы данных бывают разными: **иерархическими** (древовидная структура), **сетевыми** (графовидная структура) и **реляционными** (табличное представление данных).

**Схема базы данных** – структура базы данных, описанная на формальном языке, поддерживаемом СУБД. В реляционных базах, схема определяет таблицы и поля в каждой таблице, а также ключи и прочие параметры.

**SQL** – это язык структурированных запросов (Structured Query Language), позволяющий хранить, манипулировать и извлекать данные из реляционных баз данных. Он предназначен только для взаимодействия с базами данных.

**Реляционная модель** определяет способ представления данных (структуру данных), методы защиты данных (целостность данных), и операции, которые можно выполнять с данными (манипулирование данными). Её основные принципы:

- Все данные на концептуальном уровне представляются в виде объектов, заданных в виде строк и столбцов. Эти объекты называются **отношением**, более распространённое название – **таблица**;
- В пересечение строки и столбца таблицы можно занести только одно значение;
- Все операции выполняются над целыми отношениями, а результатом этих операций является отношение.

<p style="text-align: center;"><img src="https://ucarecdn.com/5c077c69-ade0-401a-a9f0-d7efdd6c0ceb/" style=" zoom: 100%;"><b><p style="text-align: center;">Таблица "Сотрудник"</p></b></p>

На примере таблицы "Сотрудник" можно наглядно рассмотреть терминологию баз данных:

- **Отношение** или **таблица** – структура данных целиком, набор записей, в примере – `Сотрудник`;
- **Кортеж** или **запись** – каждая строка, содержащая данные, в примере - `<001, Борин С.А, 234-01-23, программист>`. Все кортежи в отношении должны быть различны (таблица не должна содержать повторяющиеся строки);
- **Мощность** или **число записей** – число кортежей в таблице, в примере - `3`. Мощность отношения может быть любой (от 0 до бесконечности), порядок следования кортежей неважен;
- **Атрибут** или **поле** – столбец в таблице, в примере – `Табельный номер, Фамилия И.О., Телефон, Должность`;
- **Размерность** – число атрибутов в таблице, в примере – `4`. Размерность отношения должна быть больше 0, порядок следования атрибутов существенен;
- **Домен атрибута** – допустимые значения (неповторяющиеся), которые можно занести в поле, например для атрибута `Должность` домен – `{инженер, программист}`.

Реляционные базы данных могут содержать множество таблиц, связанных друг с другом. Основные виды связи:

- Связь **один к одному**. Используется редко. Есть таблица, где одной записи соответствует одна запись связанной таблицы, и наоборот.

  > Один автор может написать только одну книгу.

- Связь **один ко многим**. Есть таблица, где одной записи соответствует несколько записей связанной таблицы, а каждой записи связанной таблицы соответствует только одна запись первой таблицы.

  > Один автор может написать несколько книг, а одна книга написана только одним автором.

- Связь **многие ко многим**. Каждой записи одной таблицы соответствует несколько записей во второй, и наоборот, каждой записи второй таблицы соответствует несколько записей в первой

  > Один автор может написать несколько книг, а одна книга может быть написана несколькими авторами.

Связь в реляционных БД осуществляется посредством ключей:

- **Первичный ключ** или `PRIMARY KEY`. Поле, которое используется для обеспечения уникальности данных в таблице. Обязателен для каждой таблицы.

  > Все записи в столбце ключа являются уникальными.

- **Внешний ключ** или `FOREIGN KEY`. Обеспечивает однозначную логическую связь между таблицами одной БД. *Ключ, который используется для связи таблицы 1 с другой таблицей 2.*
  Например, записи таблицы 1 должны ссылаться на данные из таблицы 2. Тогда, в таблице 1 создаётся специальный столбец, значения в котором совпадают со значениями первичного ключа другой таблицы.

  > Есть таблица с фамилиями и их айдишниками, есть таблица с номерами телефонов и их айдишниками. В таблице номеров можно добавить столбец и обозначить его внешним ключом со ссылкой на первичный ключ таблицы фамилий.
  >
  > Зачем? Чтобы можно было составлять запрос к обеим таблицам и получать сводную информацию о фамилиях и их номерах телефонов.

  ```sql
  FOREIGN KEY (связанное_поле_зависимой_таблицы)  
  REFERENCES главная_таблица (связанное_поле_главной_таблицы)
  ```

- **Составной ключ**. Ключ, содержащий несколько полей (атрибутов). Позволяет заменять специально вводимые идентификаторы на комбинацию полей (например, комбинация айдишников фамилии и его номера, используемых в сводной таблице для раздельных таблиц фамилий и номеров).

## 3. Задача

Выполните действия в двоичной системе счисления для выражения: 156/6-13*7+18. Переведите каждое из исходных чисел в двоичную систему счисления. Результат переведите в десятичную систему счисления. Проверьте правильность решения.

****

**Для перевода числа в двоичную систему, быстрее всего представить его как сумму степеней двойки:**

- $156_{10}=128+16+8+4=2^7+2^4+2^3+2^2=10011100_{2}$

- $6_{10}=2^2+2^1=110_{2}$

- $13_{10}=2^3+2^2+2^0=1101_{2}$

- $7_{10}=2^2+2^1+2^0=111_{2}$

- $18_{10}=2^4+2^1=10010_{2}$

**Сложение 2-чных чисел:** поразрядно складываем цифры в столбиках. Если в разряде в сумме получается 2, единица переносится в соседний слева разряд. (Всё как в обычной арифметике, просто в обычке перенос при 10).

**Вычитание 2-чных чисел:** как сложение, но вычитаемое записывается в обратном коде (все 1 меняются на 0, а все 0 – на 1, и к полученному числу прибавляется 1).

**Умножение и деление 2-чных чисел:** один в один как для обычных чисел.



<p style="text-align: center;"><img src="https://prog-cpp.ru/wp-content/uploads/2014/03/13div5.png" style=" zoom: 100%;"><b><p style="text-align: center;">Умножение и деление двоичных чисел</p></b></p>

<p style="text-align: center;"><img src="https://drive.google.com/uc?export=view&id=1Vsq9ydFkP1TYlUvcAXgYTNX-w9sTwqCZ" style=" zoom: 25%;"><b><p style="text-align: center;">Выполнение двоичных действий</p></b></p>

**Проверка:**

$156/6-13*7+18=26-91+18=-47$

## 4. Задача

Спроектируйте базу данных для предприятия связи, содержащую следующие таблицы: Сотрудники (отдел, табельный номер, фио, пол, код должности, дата рождения, хобби, стаж), Штатное расписание (код должности, должность, оклад). Установите связь между таблицами. Создайте форму для ввода и редактирования данных в таблицах. Сформируйте запрос 1 «Зарплата», в котором хранится информация о зарплате каждого сотрудника, зарплата = оклад + премия, где премия зависит от стажа работы и, если стаж меньше или равен 5 лет премия равна 50% от оклада; если стаж больше 5 лет премия равна 100% от оклада; запрос 2, содержащий информацию о сотрудницах (пол- женский), имеющих зарплату выше средней по отделу, вывести поля: отдел, ФИО, пол, должность, зарплата.

****

```sql
CREATE DATABASE IF NOT EXISTS связисты;  -- Создать БД если не существует
USE связисты;  -- Использовать БД

-- Создать таблицу "Расписание"
CREATE TABLE IF NOT EXISTS Расписание(
    код_должности INT PRIMARY KEY,
    должность VARCHAR(30),
     -- 12 - число знаков до ',', 2 - после
    оклад DECIMAL(12, 2)
);

INSERT INTO Расписание (код_должности, должность, оклад) 
    VALUES (1, 'доцент', 360.00);
INSERT INTO Расписание (код_должности, должность, оклад) 
    VALUES (2, 'магистрант', 215.00);
INSERT INTO Расписание (код_должности, должность, оклад) 
    VALUES (3, 'преподаватель', 310.00);

-- Создать таблицу "Сотрудники"
CREATE TABLE IF NOT EXISTS Сотрудники(
    табельный_номер INT PRIMARY KEY AUTO_INCREMENT, 
    фио VARCHAR(50),
    отдел VARCHAR(30),
    код_должности INT,
    пол VARCHAR(1),
    дата_рождения DATE,
    стаж INT,
    семья VARCHAR(1),
    дети INT,
    FOREIGN KEY (код_должности) REFERENCES Расписание (код_должности)
);

INSERT INTO Сотрудники (фио, отдел, код_должности, пол, дата_рождения, стаж, семья, дети) 
    VALUES ('Баранов П.Е.', 'ИСТ', 1, 'М', '1999-01-12', 13, 'Х', 1);
INSERT INTO Сотрудники (фио, отдел, код_должности, пол, дата_рождения, стаж, семья, дети) 
    VALUES ('Абрамова К.А.', 'МЭС', 1, 'Ж', '1989-04-26', 4, 'Х', 0);
INSERT INTO Сотрудники (фио, отдел, код_должности, пол, дата_рождения, стаж, семья, дети) 
    VALUES ('Семенов И.В.', 'МЭС', 2, 'М', '1979-05-13', 5, 'Р', 5);
INSERT INTO Сотрудники (фио, отдел, код_должности, пол, дата_рождения, стаж, семья, дети) 
    VALUES ('Ильиных Г.Р.', 'ИСТ', 3, 'Ж', '1985-03-05', 20, 'Б', 3);
```

>Сформируйте запросы:
>
>- запрос1 «Зарплата», в котором хранится информация о зарплате каждого сотрудника, зарплата = оклад + премия, где премия зависит от стажа работы и если стаж меньше или равен 5 лет премия равна 50% от оклада; если стаж больше 5 лет премия равна 100% от оклада;

```sql
SELECT
    фио, должность, оклад + IF(стаж<=5, оклад*0.5, оклад) AS Зарплата
FROM
    Сотрудники INNER JOIN Расписание USING (код_должности)
```

>- запрос 2, содержащий информацию о сотрудницах (пол - женский), имеющих зарплату выше средней по отделу, вывести поля: отдел, фио, пол, должность, зарплата.

```sql
SELECT
    отдел, фио, должность, пол,
    оклад + IF(стаж<=5, оклад*0.5, оклад) AS Зарплата
FROM
    Сотрудники INNER JOIN Расписание USING(код_должности)
    INNER JOIN (SELECT отдел, AVG(оклад + IF(стаж<=5, оклад*0.5, оклад)) AS СредЗП
                FROM Сотрудники INNER JOIN Расписание USING(код_должности)
                GROUP BY отдел
               ) AS t USING(отдел)
WHERE
    (оклад + IF(стаж<=5, оклад*0.5, оклад)) > СредЗП
    AND пол = 'ж'
```
